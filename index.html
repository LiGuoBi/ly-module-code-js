<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>

<!-- <script src="ajax.js"></script> -->
<!-- <script src="Promise自定义封装.js"></script> -->
<script>

/**
 * 时间格式化
 * @author 小炜 2021-01-12
 * @param {String} dateTime - 秒或毫秒的时间戳
 * @param {String} format 时间格式，可选。默认为yyyy-mm-dd，年为"yyyy"，月为"mm"，日为"dd"，时为"hh"，分为"MM"，秒为"ss"
 * @return {String} 格式化的日期
 */
// yyyy:mm:dd|yyyy:mm|yyyy年mm月dd日|yyyy年mm月dd日 hh时MM分等,可自定义组合
function timeFormat(dateTime = null, fmt = 'yyyy-mm-dd') {
	// 如果为null,则格式化当前时间
	if (!dateTime) dateTime = Number(new Date());
	// 如果dateTime长度为10或者13，则为秒和毫秒的时间戳，如果超过13位，则为其他的时间格式
  if (dateTime.toString().length == 10) dateTime *= 1000;
  console.log(dateTime)
  console.log(dateTime.toString())
	let date = new Date(dateTime);
	let ret;
	let opt = {
		"y+": date.getFullYear().toString(), // 年
		"m+": (date.getMonth() + 1).toString(), // 月
		"d+": date.getDate().toString(), // 日
		"h+": date.getHours().toString(), // 时
		"M+": date.getMinutes().toString(), // 分
		"s+": date.getSeconds().toString() // 秒
		// 有其他格式化字符需求可以继续添加，必须转化成字符串
  };
	for (let k in opt) {
    // exec返回一个匹配结果的数组，没有匹配到返回null
    ret = new RegExp("(" + k + ")").exec(fmt);
		if (ret) {
      // 替换日期
			fmt = fmt.replace(ret[1], (ret[1].length == 1) ? (opt[k]) : (opt[k].padStart(ret[1].length, "0")))
    };
	};
	return fmt;
}

console.log( timeFormat(new Date()) )

  // console.log(a.concat)

  // console.log(Number(new Date()))
  // console.log(Date.now())

  
  // let p1 = new MyPromise((resolve, reject) => {
  //   setTimeout(() => {
  //     resolve('伊卡洛斯')
  //   }, 2000)
  // })

  // // let p2 = MyPromise.reject('蕾姆')
  // let p2 = new MyPromise((resolve, reject) => {
  //   setTimeout(() => {
  //     resolve('蕾姆')
  //   }, 1000)
  // })

  // let p3 = new MyPromise((resolve, reject) => {
  //   // setTimeout(() => {
  //     resolve('阿帕斯')
  //   // }, 1000)
  // })

  // let res = MyPromise.race([p1, p2, p3])
  // res.then(res => {
  //   console.log('success:', res)
  // }, err => {
  //   console.log('error:', err)
  // });
  // console.log(res)

  /* new MyPromise((resolve, reject) => {
    // setTimeout(() => {
      resolve('伊卡洛斯')
      console.log('1111')
    // }, 2000)
  }).then(res => {
    console.log('2222')
  }, err => {
    console.log('3333')
  })
  console.log('4444') */


  


</script>
</body>
</html>